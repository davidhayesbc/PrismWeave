<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PrismWeave - Unified Content Capture System</title>
    <link rel="icon" href="./favicon.ico" type="image/x-icon" />
    <link rel="icon" href="./favicon.png" type="image/png" />
    <script>
        (function () {
            try {
                var storageKey = 'prismweave-theme';
                var storedTheme = localStorage.getItem(storageKey);
                var prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                var resolvedTheme = storedTheme || (prefersDark ? 'dark' : 'light');
                document.documentElement.dataset.theme = resolvedTheme;
            } catch (error) {
                document.documentElement.dataset.theme = 'light';
            }
        })();
    </script>
    <link rel="stylesheet" href="./assets/styles.css">
</head>
<body>
    <div class="page">
        <header class="site-header">
            <div class="brand">
                <img src="./assets/favicon.svg" alt="PrismWeave logo" class="brand__icon">
                <div class="brand__meta">
                    <h1>PrismWeave</h1>
                    <p>Unified document management and content creation system</p>
                </div>
            </div>
            <button class="pw-theme-toggle" type="button" data-theme-toggle>
                <span class="pw-theme-toggle__icon pw-theme-toggle__icon--sun" aria-hidden="true">‚òÄÔ∏è</span>
                <span class="pw-theme-toggle__icon pw-theme-toggle__icon--moon" aria-hidden="true">üåô</span>
                <span class="pw-theme-toggle__label">Theme</span>
            </button>
        </header>

        <main class="page-main">
            <section class="pw-card surface status">
                <div class="status__heading">
                    <h2>Deployment Status</h2>
                    <span>Live</span>
                </div>
                <dl class="status__grid">
                    <div>
                        <dt>Build Date</dt>
                        <dd>{{BUILD_DATE}}</dd>
                    </div>
                    <div>
                        <dt>Environment</dt>
                        <dd>{{ENVIRONMENT}}</dd>
                    </div>
                </dl>
            </section>

            <section class="grid">
                <article class="pw-card surface feature">
                    <h3>Bookmarklet</h3>
                    <p>Ultra-lightweight content capture tool that works in any browser.</p>
                    <a href="./bookmarklet/generator.html" class="pw-btn pw-btn-primary">Generate</a>
                </article>

                <article class="pw-card surface feature">
                    <h3>Browser Extension</h3>
                    <p>Full-featured browser extension for Chrome and Edge.</p>
                    <a href="./extension/popup/popup.html" class="pw-btn pw-btn-primary">Explore</a>
                </article>

                <article class="pw-card surface feature">
                    <h3>Documentation</h3>
                    <p>Learn how to use PrismWeave effectively.</p>
                    <a href="https://github.com/davidhayesbc/PrismWeave#readme" class="pw-btn pw-btn-primary">Read Docs</a>
                </article>

                <article class="pw-card surface feature">
                    <h3>Development</h3>
                    <p>Source code and development resources.</p>
                    <a href="https://github.com/davidhayesbc/PrismWeave" class="pw-btn pw-btn-primary">GitHub</a>
                </article>
            </section>

            <section class="pw-card pw-card--static surface quick-start">
                <h2>Quick Start</h2>
                <ol>
                    <li><strong>Try the Bookmarklet:</strong> Click "Generate" above</li>
                    <li><strong>Configure GitHub:</strong> Add your repository settings</li>
                    <li><strong>Capture Content:</strong> Use on any webpage to save content</li>
                    <li><strong>Manage Documents:</strong> View captured content in your repository</li>
                </ol>
            </section>
        </main>

        <footer class="site-footer">
            <small>PrismWeave v{{VERSION}} ‚Ä¢ Built with care for the open web</small>
            <img src="./assets/favicon.svg" alt="PrismWeave emblem" class="site-footer__icon">
        </footer>
    </div>

    <script>
        (function () {
            var storageKey = 'prismweave-theme';
            var root = document.documentElement;
            var toggle = document.querySelector('[data-theme-toggle]');

            var systemTheme = function () {
                return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
            };

            var setTheme = function (theme) {
                root.dataset.theme = theme;
                if (toggle) {
                    toggle.setAttribute('aria-label', 'Switch to ' + (theme === 'dark' ? 'light' : 'dark') + ' theme');
                }
            };

            var getStoredTheme = function () {
                try {
                    return localStorage.getItem(storageKey);
                } catch (error) {
                    return null;
                }
            };

            var storedTheme = getStoredTheme();
            setTheme(storedTheme || root.dataset.theme || systemTheme());

            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function (event) {
                if (!getStoredTheme()) {
                    setTheme(event.matches ? 'dark' : 'light');
                }
            });

            if (toggle) {
                toggle.addEventListener('click', function () {
                    var nextTheme = root.dataset.theme === 'dark' ? 'light' : 'dark';
                    setTheme(nextTheme);
                    try {
                        localStorage.setItem(storageKey, nextTheme);
                    } catch (error) {
                        /* Storage may be unavailable; ignore. */
                    }
                });
            }
        })();
    </script>
</body>
</html>
