<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <title>Test Updated Notification - PrismWeave</title>
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        background: #f5f5f5;
      }
      .test-section {
        background: white;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }
      .test-button {
        background: #007bff;
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 14px;
        margin: 5px;
        transition: all 0.2s ease;
      }
      .test-button:hover {
        background: #0056b3;
        transform: translateY(-1px);
      }
      .test-button.success {
        background: #28a745;
      }
      .test-button.error {
        background: #dc3545;
      }
      .test-button.info {
        background: #17a2b8;
      }

      .instructions {
        background: #e9ecef;
        padding: 15px;
        border-radius: 6px;
        margin: 10px 0;
      }

      .fake-content {
        background: #fff3cd;
        padding: 15px;
        border-radius: 6px;
        margin: 10px 0;
        border: 1px solid #ffeaa7;
      }

      .fake-link {
        color: #007bff;
        text-decoration: underline;
        cursor: pointer;
        padding: 5px;
        margin: 5px;
        display: inline-block;
      }

      .fake-link:hover {
        background: #f0f8ff;
      }

      .status {
        margin: 10px 0;
        padding: 10px;
        border-radius: 4px;
        font-family: monospace;
        font-size: 12px;
        background: #f8f9fa;
        border: 1px solid #e9ecef;
      }
    </style>
  </head>
  <body>
    <h1>ðŸ”” Test Updated Notification System</h1>

    <div class="instructions">
      <h3>Instructions:</h3>
      <ol>
        <li>Load the PrismWeave extension in Chrome</li>
        <li>Click the buttons below to test different notification types</li>
        <li>The notifications now show the document title as clickable text</li>
        <li>Try clicking on the document title in the notification to open the link</li>
        <li>Verify that clicks don't fall through to the content below</li>
      </ol>
    </div>

    <div class="test-section">
      <h3>Test Updated Clickable Notifications</h3>
      <button
        class="test-button success"
        onclick="testSuccessNotification()"
      >
        Test Success Notification with Link
      </button>

      <button
        class="test-button error"
        onclick="testErrorNotification()"
      >
        Test Error Notification with Link
      </button>

      <button
        class="test-button info"
        onclick="testInfoNotification()"
      >
        Test Info Notification with Link
      </button>

      <button
        class="test-button"
        onclick="testLongTitle()"
      >
        Test Long Title Notification
      </button>

      <button
        class="test-button"
        onclick="testNonClickable()"
      >
        Test Non-Clickable Notification
      </button>
    </div>

    <div class="fake-content">
      <h3>Fake Content to Test Click-Through</h3>
      <p>This content is here to test that clicking the notification doesn't trigger clicks on underlying elements.</p>
      <a
        href="#"
        class="fake-link"
        onclick="alert('Underlying link clicked! This should NOT happen when clicking notifications.')"
      >
        This link should NOT be triggered by notification clicks
      </a>
      <a
        href="#"
        class="fake-link"
        onclick="alert('Another underlying link clicked!')"
      >
        Another test link
      </a>
      <p>Try clicking on the notification area when it appears - the underlying links should not be triggered.</p>
    </div>

    <div
      class="status"
      id="status"
    >
      Status: Ready to test notifications...
    </div>

    <script>
      function updateStatus(message) {
        const status = document.getElementById('status');
        status.textContent = `Status: ${message}`;
        console.log('Status:', message);
      }

      function testSuccessNotification() {
        updateStatus('Testing success notification with clickable title...');

        if (window.prismweaveContentScript) {
          window.prismweaveContentScript.showNotification(
            'Page captured successfully!',
            'success',
            10000, // 10 seconds
            'https://github.com/davidhayesbc/PrismWeaveDocs'
          );
        } else {
          updateStatus('ERROR: PrismWeave extension not found');
        }
      }

      function testErrorNotification() {
        updateStatus('Testing error notification with clickable title...');

        if (window.prismweaveContentScript) {
          window.prismweaveContentScript.showNotification(
            'Capture failed - try again',
            'error',
            10000,
            'https://github.com/davidhayesbc/PrismWeave/issues'
          );
        } else {
          updateStatus('ERROR: PrismWeave extension not found');
        }
      }

      function testInfoNotification() {
        updateStatus('Testing info notification with clickable title...');

        if (window.prismweaveContentScript) {
          window.prismweaveContentScript.showNotification(
            'Processing document...',
            'info',
            10000,
            'https://github.com/davidhayesbc/PrismWeave'
          );
        } else {
          updateStatus('ERROR: PrismWeave extension not found');
        }
      }

      function testLongTitle() {
        updateStatus('Testing notification with long document title...');

        // Temporarily change the document title to test long title truncation
        const originalTitle = document.title;
        document.title =
          'This is a very long document title that should be truncated in the notification to prevent it from being too wide';

        if (window.prismweaveContentScript) {
          window.prismweaveContentScript.showNotification(
            'Document with long title captured!',
            'success',
            10000,
            'https://github.com/davidhayesbc/PrismWeaveDocs'
          );

          // Restore original title after a short delay
          setTimeout(() => {
            document.title = originalTitle;
          }, 1000);
        } else {
          updateStatus('ERROR: PrismWeave extension not found');
        }
      }

      function testNonClickable() {
        updateStatus('Testing non-clickable notification...');

        if (window.prismweaveContentScript) {
          window.prismweaveContentScript.showNotification(
            'This is a regular notification without a link',
            'info',
            5000
            // No URL provided - should not be clickable
          );
        } else {
          updateStatus('ERROR: PrismWeave extension not found');
        }
      }

      // Wait for the extension to be ready
      document.addEventListener('prismweave-ready', function (event) {
        updateStatus('PrismWeave extension ready! Version: ' + event.detail.version);
      });

      // Check if extension is already loaded
      if (window.prismweaveContentScript) {
        updateStatus('PrismWeave extension detected on page load');
      } else {
        updateStatus('Waiting for PrismWeave extension to load...');
      }
    </script>
  </body>
</html>
