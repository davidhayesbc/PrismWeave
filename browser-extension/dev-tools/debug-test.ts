#!/usr/bin/env node

// Generated by Copilot
// Simple test script to debug the URL conversion issue

import chalk from 'chalk';
import { NodeMarkdownConverter } from './node-markdown-converter.ts';

async function quickTest() {
  console.log(chalk.blue('🔍 Quick test of NodeMarkdownConverter...'));
  
  try {
    const converter = new NodeMarkdownConverter();
    console.log(chalk.gray('✅ Converter created'));
    
    const html = `
      <!DOCTYPE html>
      <html>
      <head><title>Test Page</title></head>
      <body>
        <h1>Test Title</h1>
        <p>This is a test paragraph with <strong>bold text</strong>.</p>
        <ul>
          <li>List item 1</li>
          <li>List item 2</li>
        </ul>
      </body>
      </html>
    `;
    
    console.log(chalk.gray('🔄 Converting HTML...'));
    const result = await converter.convertHtmlWithDOM(html, {
      generateFrontmatter: true,
      includeMetadata: true,
    });
    
    console.log(chalk.green('✅ Conversion successful!'));
    console.log(chalk.cyan(`📝 Markdown length: ${result.markdown.length}`));
    console.log(chalk.cyan(`📊 Word count: ${result.wordCount}`));
    console.log(chalk.cyan(`🖼️  Images: ${result.images.length}`));
    
    console.log(chalk.yellow('\n📄 Generated Markdown:'));
    console.log(result.markdown);
    
  } catch (error: any) {
    console.error(chalk.red('❌ Test failed:'), error.message);
    console.error(chalk.red('Stack:'), error.stack);
  }
}

quickTest();
