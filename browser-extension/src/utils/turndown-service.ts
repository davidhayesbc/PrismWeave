// Generated by Copilot
// TurndownService import for browser extension
// This file ensures TurndownService is available in the extension context

interface IGlobalScope {
  TurndownService?: unknown;
}

// Load TurndownService for browser extension use
(function() {
  if (typeof window !== 'undefined' && !(window as IGlobalScope).TurndownService) {
    // For content scripts and popup context - use local file
    const script = document.createElement('script');
    script.src = chrome.runtime.getURL('src/libs/turndown.min.js');
    script.async = false; // Load synchronously to ensure availability
    document.head.appendChild(script);
  } else if (typeof self !== 'undefined' && typeof importScripts !== 'undefined' && !(self as IGlobalScope).TurndownService) {
    // For service worker context - import local file
    try {
      importScripts('./libs/turndown.min.js');
    } catch (error) {
      console.warn('Could not load TurndownService in service worker:', error);
      // Service worker will fall back to enhanced conversion
    }
  }
})();

// Export the loaded TurndownService
const TurndownService = typeof window !== 'undefined' ? 
  (window as IGlobalScope).TurndownService : 
  (self as IGlobalScope).TurndownService;

export default TurndownService || null;
