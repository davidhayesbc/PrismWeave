@echo off
REM Generated by Copilot
REM Setup script for PrismWeave CLI tests (Windows)

echo ========================================
echo   PrismWeave CLI Test Setup
echo ========================================
echo.

REM Check if Node.js is installed
where node >nul 2>nul
if %ERRORLEVEL% NEQ 0 (
    echo X Node.js is not installed. Please install Node.js 20.x or higher.
    exit /b 1
)

echo âˆš Node.js version: 
node -v
echo.

REM Install dependencies
echo ðŸ“¦ Installing dependencies...
call npm install

if %ERRORLEVEL% NEQ 0 (
    echo X Failed to install dependencies
    exit /b 1
)

echo âˆš Dependencies installed
echo.

REM Build TypeScript
echo ðŸ”¨ Building TypeScript...
call npm run build

if %ERRORLEVEL% NEQ 0 (
    echo X Build failed
    exit /b 1
)

echo âˆš Build successful
echo.

REM Run tests
echo ðŸ§ª Running tests...
call npm test

if %ERRORLEVEL% NEQ 0 (
    echo X Some tests failed
    exit /b 1
)

echo.
echo âˆš All tests passed!
echo.

REM Generate coverage report
echo ðŸ“Š Generating coverage report...
call npm run test:coverage

echo.
echo ========================================
echo   Setup Complete!
echo ========================================
echo.
echo Coverage report available at:
echo   cli\coverage\lcov-report\index.html
echo.
echo Available commands:
echo   npm test              - Run all tests
echo   npm run test:watch    - Run tests in watch mode
echo   npm run test:coverage - Run tests with coverage
echo.

pause
